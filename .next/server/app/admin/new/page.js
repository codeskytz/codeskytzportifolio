(()=>{var e={};e.id=345,e.ids=[345],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},4577:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},6821:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},5079:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>m,tree:()=>u});var a=r(7096),s=r(6132),o=r(7284),i=r.n(o),n=r(2564),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let u=["",{children:["admin",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4404)),"/workspaces/codeskytzportifolio/app/admin/new/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,3167)),"/workspaces/codeskytzportifolio/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/workspaces/codeskytzportifolio/app/admin/new/page.js"],d="/admin/new/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/new/page",pathname:"/admin/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},9493:(e,t,r)=>{Promise.resolve().then(r.bind(r,4823))},4823:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>NewProject});var a={};r.r(a),r.d(a,{db:()=>c});var s=r(784),o=r(9885),i=r(2856),n=r(1522),l=r(1640);let u=(0,i.ZF)({apiKey:"AIzaSyCnzXi1tVu3fWvuPMffaepqT74DXEb8wWk",authDomain:"codeskytz-portifolio.firebaseapp.com",projectId:"codeskytz-portifolio",storageBucket:"codeskytz-portifolio.firebasestorage.app",messagingSenderId:"658801980297",appId:"1:658801980297:web:3df9f01e5641120d81e758",measurementId:"G-0RHE2PZ3FL"}),c=(0,n.ad)(u);function NewProject(){let[e,t]=(0,o.useState)(""),[r,i]=(0,o.useState)(""),[n,l]=(0,o.useState)(["React","Next.js","Tailwind"]),[u,d]=(0,o.useState)([]),[p,m]=(0,o.useState)(null),[g,x]=(0,o.useState)(null),[f,h]=(0,o.useState)([]),[b,y]=(0,o.useState)([]),[w,j]=(0,o.useState)(""),[v,_]=(0,o.useState)(!1),q="8a402848056a5c86e392b765263065e0",[k,P]=(0,o.useState)("");async function uploadToImgbb(e){let t;if(!q)throw Error("IMGBB API key not configured. Set NEXT_PUBLIC_IMGBB_API in your environment.");let r=new FormData;if(r.append("key",q),e&&"object"==typeof e&&e instanceof File)r.append("image",e);else if(e&&"string"==typeof e){let t=String(e).replace(/^data:.*;base64,/,"").replace(/\s+/g,""),a=/^[A-Za-z0-9+/]+=*$/.test(t);if(!a)throw Error("Invalid base64 data for image. Consider using a direct file upload.");r.append("image",t)}else throw Error("Can't get target upload source info");let a=await fetch("https://api.imgbb.com/1/upload",{method:"POST",body:r});try{t=await a.json()}catch(e){throw Error("Invalid response from imgbb")}if(!a.ok||!t||!t.data||!t.data.url){let e=t?.error?.message||t?.status_message||JSON.stringify(t)||"Upload failed";throw Error(e)}return t.data.url}async function submit(s){if(s.preventDefault(),!e)return alert("Title required");_(!0),P("");try{let s="";if(g)try{s=await uploadToImgbb(g)}catch(e){if(p)s=await uploadToImgbb(p);else throw e}else p&&(s=await uploadToImgbb(p));let o=[],n=Math.max(f.length,b.length);for(let e=0;e<n;e++){let t=f[e],r=b[e];if(r)try{o.push(await uploadToImgbb(r));continue}catch(e){if(t){o.push(await uploadToImgbb(t));continue}throw e}if(t)try{o.push(await uploadToImgbb(t));continue}catch(t){throw Error(`Failed to upload gallery image #${e+1}: ${t?.message||t}`)}console.warn(`Skipping gallery index ${e} - no file or base64 data available`)}await (0,a.addDoc)((0,a.collection)(c,"projects"),{title:e,summary:r,techs:u,front:s,gallery:o,live:w,createdAt:(0,a.serverTimestamp)()}),alert("Project created"),t(""),i(""),d([]),m(null),h([]),j("")}catch(t){console.error(t);let e=t?.message||String(t);P(e),alert("Failed: "+e)}finally{_(!1)}}function toBase64(e){return new Promise((t,r)=>{let a=new FileReader;a.onload=()=>t(a.result),a.onerror=r,a.readAsDataURL(e)})}async function handleFront(e){let t=e.target.files[0];if(!t)return;let r=await toBase64(t);m(r),x(t)}async function handleGallery(e){let t=Array.from(e.target.files),r=[];for(let e of t)r.push(await toBase64(e));h(r),y(t)}return(0,s.jsxs)("div",{className:"p-6 max-w-3xl mx-auto",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"Create Project"}),(0,s.jsxs)("form",{onSubmit:submit,className:"mt-4 space-y-4",children:[s.jsx("input",{value:e,onChange:e=>t(e.target.value),placeholder:"Title",className:"w-full p-2 border rounded"}),s.jsx("textarea",{value:r,onChange:e=>i(e.target.value),placeholder:"Short summary",className:"w-full p-2 border rounded"}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm font-semibold mb-2",children:"Techs (click to toggle)"}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[n.map(e=>s.jsx("button",{type:"button",onClick:()=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:`px-3 py-1 rounded ${u.includes(e)?"bg-indigo-600 text-white":"bg-gray-100"}`,children:e},e)),s.jsx("input",{placeholder:"Add tech",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),l(t=>[...t,e.target.value]),e.target.value="")},className:"px-3 py-1 border rounded"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm",children:"Front image"}),s.jsx("input",{type:"file",accept:"image/*",onChange:handleFront})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm",children:"Gallery images"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:handleGallery})]}),s.jsx("input",{value:w,onChange:e=>j(e.target.value),placeholder:"Live URL",className:"w-full p-2 border rounded"}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",disabled:v,className:"px-4 py-2 rounded bg-indigo-600 text-white",children:v?"Uploading...":"Create"})})]})]})}(0,l.cF)(u)},4404:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>o,default:()=>l});var a=r(5153);let s=(0,a.createProxy)(String.raw`/workspaces/codeskytzportifolio/app/admin/new/page.js`),{__esModule:o,$$typeof:i}=s,n=s.default,l=n}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[210,564,464],()=>__webpack_exec__(5079));module.exports=r})();